{"version":3,"sources":["webpack:///./src/views/drag/index.vue?ae03","webpack:///./src/utils/drag.js","webpack:///src/views/drag/index.vue","webpack:///./src/views/drag/index.vue?299b","webpack:///./src/views/drag/index.vue","webpack:///./src/views/drag/index.vue?dcbb"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","attrs","transform","getTransform","Drag","selector","elem","document","getElementById","startX","startY","sourceX","sourceY","init","divStyle","createElement","style","transformArr","i","len","length","prototype","constructor","setDrag","getStyle","property","defaultView","getComputedStyle","currentStyle","getPosition","pos","x","y","transformValue","temp","match","parseInt","trim","position","setPosition","left","top","self","start","event","pageX","pageY","addEventListener","move","end","currentX","currentY","distanceX","distanceY","toFixed","removeEventListener","demo","component"],"mappings":"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","file":"js/chunk-86f1f2e6.d0de260e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"target\"}})])}]\n\nexport { render, staticRenderFns }","\n// 私有属性不需要被外部访问\nvar transform = getTransform()\n\nexport function Drag (selector) {\n  // 构造函数 属于每个实例单独都有的属性\n\n  // 目标元素\n  // eslint-disable-next-line valid-typeof\n  this.elem = typeof selector === 'Object' ? selector : document.getElementById(selector)\n\n  // 声明2个变量对象用来保存鼠标初始位置的x，y坐标\n  this.startX = 0\n  this.startY = 0\n\n  // 声明2个变量来保存目标元素初始位置的x，y坐标\n  this.sourceX = 0\n  this.sourceY = 0\n\n  // 初始化函数\n  this.init()\n}\n\n// 原型\nDrag.prototype = {\n  // 第一步永远是将构造函数指回自己\n  constructor: Drag,\n\n  // 在原型上添加一些共享方法\n\n  // 初始化方法\n  init: function () {\n    // 初始时需要做些什么事情， 这里是绑定移动的事件。\n    this.setDrag()\n  },\n  // 获取元素的当前属性\n  getStyle: function (property) {\n    return document.defaultView.getComputedStyle ? document.defaultView.getComputedStyle(this.elem, false)[property] : this.elem.currentStyle[property]\n  },\n  // 获取当前元素的位置信息\n  getPosition: function () {\n    var pos = {x: 0, y: 0}\n    if (transform) {\n      var transformValue = this.getStyle(transform)\n      if (transformValue === 'none') {\n        this.elem.style[transform] = 'translate(0, 0)'\n        return pos\n      } else {\n        var temp = transformValue.match(/-?\\d+/g)\n        // eslint-disable-next-line no-return-assign\n        return pos = {\n          x: parseInt(temp[4].trim()),\n          y: parseInt(temp[5].trim())\n        }\n      }\n    } else {\n      if (this.getStyle('position') === 'static') {\n        this.elem.style.position = 'relative'\n        return pos\n      } else {\n        // eslint-disable-next-line no-return-assign\n        return pos = {\n          x: parseInt(this.getStyle('left') ? this.getStyle('left') : 0),\n          y: parseInt(this.getStyle('top') ? this.getStyle('top') : 0)\n        }\n      }\n    }\n  },\n  // 设置元素位置\n  setPosition: function (pos) {\n    if (transform) {\n      this.elem.style[transform] = 'translate(' + pos.x + 'px, ' + pos.y + 'px)'\n    } else {\n      this.elem.style.left = pos.x + 'px'\n      this.elem.style.top = pos.y + 'px'\n    }\n  },\n  // 设置监听事件\n  setDrag: function () {\n    let self = this\n\n    this.elem.addEventListener('mousedown', start, false)\n\n    // 绑定在mousedown上的回调，event为传入的事件对象\n    function start (event) {\n      // 获取鼠标初始位置\n      self.startX = event.pageX\n      self.startY = event.pageY\n\n      // 获取元素初始位置\n      var pos = self.getPosition(this.elem)\n\n      self.sourceX = pos.x\n      self.sourceY = pos.y\n\n      // 绑定\n      document.addEventListener('mousemove', move, false)\n      document.addEventListener('mouseup', end, false)\n    }\n\n    function move (event) {\n      // 获取鼠标当前位置\n      var currentX = event.pageX\n      var currentY = event.pageY\n\n      // 计算差值\n      var distanceX = currentX - self.startX\n      var distanceY = currentY - self.startY\n\n      // 计算并且设置元素当前位置\n\n      self.setPosition({\n        x: (self.sourceX + distanceX).toFixed(),\n        y: (self.sourceY + distanceY).toFixed()\n      })\n    }\n\n    function end (event) {\n      document.removeEventListener('mousemove', move)\n      document.removeEventListener('mouseup', end)\n    }\n  }\n\n}\n\n// 获取当前浏览器支持的transform兼容写法\nfunction getTransform () {\n  let transform = ''\n  let divStyle = document.createElement('div').style\n  // 可能涉及到的几种兼容性写法，通过循环找出浏览器识别的那一个\n  let transformArr = ['transform', 'webkitTransform', 'MozTransform', 'msTransform', 'OTransform']\n\n  let i = 0\n  let len = transformArr.length\n\n  for (; i < len; i++) {\n    if (transformArr[i] in divStyle) {\n      // 找到之后立即返回，结束函数\n      // eslint-disable-next-line no-return-assign\n      return transform = transformArr[i]\n    }\n  }\n\n  // 如果没有找到，就直接返回空字符串\n  return transform\n}\n\n// 对外暴露方法\n","<template>\n  <div>\n    <div id=\"target\">\n\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport { Drag } from '@/utils/drag.js'\n\nexport default {\n  data () {\n    return {\n\n    }\n  },\n  mounted () {\n    let demo = new Drag('target')\n    demo()\n  }\n}\n</script>\n\n<style lang=\"less\">\n\n#target {\n\n  width: 100px;\n  height: 100px;\n  background-color: hotpink;\n  cursor: move;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f9f4ebfe&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}