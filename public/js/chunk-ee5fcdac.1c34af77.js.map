{"version":3,"sources":["webpack:///./src/views/scroll/index.vue?1bdc","webpack:///./src/views/scroll/index.vue?1fc4","webpack:///src/views/scroll/index.vue","webpack:///./src/views/scroll/index.vue?3dc8","webpack:///./src/views/scroll/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","l","i","key","staticStyle","attrs","img","_v","_s","title","des","staticRenderFns","lists","itemHeight","inContainerList","scrollBottomNum","scrollTop","scrollHeight","getList","scroll","debounce","scrollAction","window","onscroll","methods","fn","delay","timer","clearTimeout","setTimeout","_this","includeList","filter","height","console","log","list","length","push","initList","oldListLength","forEach","document","documentElement","body","clientHeight","isInContainer","$nextTick","component"],"mappings":"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","file":"js/chunk-ee5fcdac.1c34af77.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2011278c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2011278c&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('ul',_vm._l((_vm.inContainerList),function(l,i){return _c('li',{key:i,staticClass:\"item\"},[[_c('img',{staticStyle:{\"width\":\"200px\",\"height\":\"100px\"},attrs:{\"src\":_vm.img}}),_c('div',{staticStyle:{\"margin-left\":\"10px\"}},[_c('span',{staticStyle:{\"color\":\"#064879\"}},[_c('strong',[_vm._v(_vm._s(l.title))])]),_vm._v(\" \"),_c('br'),_c('span',[_vm._v(_vm._s(l.des))])])]],2)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <ul>\n      <li class=\"item\" v-for=\"(l, i) in inContainerList\" :key=\"i\">\n        <template>\n          <img style=\"width: 200px; height: 100px\" :src=\"img\" />\n          <div style=\"margin-left: 10px;\">\n            <span style=\"color: #064879;\"><strong>{{ l.title }}</strong></span> <br>\n            <span>{{ l.des }}</span>\n          </div>\n        </template>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      img: 'https://fuss10.elemecdn.com/a/3f/3302e58f9a181d2509f3dc0fa68b0jpeg.jpeg',\n      lists: [], // 维护视图中出现的列表\n      itemHeight: 130, //  元素的高度\n      inContainerList: [],\n      scrollBottomNum: 0,\n      scrollTop: 0,\n      scrollHeight: 0\n    }\n  },\n  mounted () {\n    this.inContainerList = this.getList()\n    this.scroll = this.debounce(this.scrollAction)\n    window.onscroll = this.scroll\n  },\n  methods: {\n    debounce (fn, delay = 2000) { // 防抖函数\n      let timer = null\n      return () => {\n        if (timer) clearTimeout(timer)\n        timer = setTimeout(fn, delay)\n      }\n    },\n    isInContainer (lists) {\n      if (this.scrollBottomNum <= 1) {\n        return this.lists\n      }\n      const _this = this\n      const includeList = lists.filter(l => {\n        return l.height >= _this.scrollTop + _this.scrollHeight * (_this.scrollBottomNum - 1)\n      })\n      console.log(includeList)\n      return includeList\n    },\n    initList () { // 初始化列表 title 列表的名字 des 描述\n      let lists = []\n      for (let i = 0; i < 7; i++) {\n        const list = {\n          title: `Course ${this.lists.length + i + 1}第${i + 1}节`,\n          des: '快来报名学习，快来报名学习，快来报名学习，快来报名学习，快来报名学习'\n        }\n        lists.push(list)\n      }\n      return lists\n    },\n    getList () { // 模拟获取列表的 api\n      const lists = this.initList()\n      const oldListLength = this.lists.length // 之前的整个lists 的高度。\n      lists.forEach((l, i) => {\n        l.height = this.itemHeight * (oldListLength + i + 1) // 设置 list 在整个文档当中的高度\n      })\n      this.lists.push(...lists)\n      return lists\n    },\n    scrollAction () {\n      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop // 当前页面滚动条纵坐标的位置\n      const clientHeight = document.documentElement.clientHeight || document.body.clientHeight // 当前文档的高度，可见区域高度\n      const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight // 文档总的高度\n      console.log(scrollTop, clientHeight, scrollHeight)\n      if (scrollTop + clientHeight >= scrollHeight - this.itemHeight) {\n        this.scrollBottomNum++\n        if (this.scrollBottomNum === 1) {\n          this.scrollTop = scrollTop\n          this.scrollHeight = scrollHeight\n        }\n        this.inContainerList = [...this.isInContainer(this.inContainerList), ...this.getList()]\n        const _this = this\n        this.$nextTick(function () {\n          console.log(_this.scrollTop)\n          if (document.documentElement.scrollTop) {\n            document.documentElement.scrollTop = _this.scrollTop\n          } else {\n            document.body.scrollTop = _this.scrollTop\n          }\n        })\n      } else if (scrollTop <= this.itemHeight && this.scrollBottomNum > 1) {\n        // console.log('top')\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n  padding: 0 5rem;\n  margin-left: 250px;\n  width: 100%;\n  height: 100vh;\n}\n.item {\n  display: flex;\n  margin-top: 30px;\n  height: 100px;\n}\nli {\n  list-style: none;\n  text-align: left;\n}\nul {\n  padding: 0;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2011278c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2011278c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2011278c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}